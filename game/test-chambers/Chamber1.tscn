[gd_scene load_steps=18 format=2]

[ext_resource path="res://default_env.tres" type="Environment" id=1]
[ext_resource path="res://camera/PlayerCamera.gd" type="Script" id=2]
[ext_resource path="res://tileset/tiles.tres" type="TileSet" id=3]
[ext_resource path="res://test-elements/cube-dropper/CubeDropper.tscn" type="PackedScene" id=4]
[ext_resource path="res://textures/light.png" type="Texture" id=5]
[ext_resource path="res://test-elements/pedestal-button/PedestalButton.tscn" type="PackedScene" id=6]
[ext_resource path="res://portal-gun/PortalGun.tscn" type="PackedScene" id=7]
[ext_resource path="res://test-elements/testchamber-sign/TestchamberSign.tscn" type="PackedScene" id=8]
[ext_resource path="res://player/Player.tscn" type="PackedScene" id=9]
[ext_resource path="res://test-elements/test-door/TestDoor.tscn" type="PackedScene" id=10]
[ext_resource path="res://test-elements/weighted-cube/Weighted Cube.tscn" type="PackedScene" id=11]
[ext_resource path="res://test-elements/floor-button/FloorButton.tscn" type="PackedScene" id=12]
[ext_resource path="res://test-elements/fizzler/Fizzler.tscn" type="PackedScene" id=13]

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 1340.54, 33.6469 )

[sub_resource type="RectangleShape2D" id=2]
extents = Vector2( 68.429, 515.513 )

[sub_resource type="RectangleShape2D" id=3]
extents = Vector2( 74.9884, 724.341 )

[sub_resource type="RectangleShape2D" id=4]
extents = Vector2( 1164.16, 97.1317 )

[node name="World" type="Node2D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource( 1 )

[node name="TileMapBackground" type="TileMap" parent="."]
modulate = Color( 0.517647, 0.517647, 0.517647, 1 )
scale = Vector2( 0.5, 0.5 )
z_index = -10
tile_set = ExtResource( 3 )
cell_size = Vector2( 128, 128 )
cell_quadrant_size = 64
occluder_light_mask = 0
format = 1
tile_data = PoolIntArray( -917510, 3, 0, -917509, 3, 0, -917508, 3, 0, -917507, 3, 0, -917506, 3, 0, -917505, 3, 0, -983040, 3, 0, -983039, 3, 0, -983038, 3, 0, -983037, 3, 0, -983036, 3, 0, -983035, 3, 0, -983034, 3, 0, -983033, 3, 0, -983032, 3, 0, -983031, 3, 0, -983030, 3, 0, -983029, 3, 0, -983028, 3, 0, -983027, 3, 0, -983026, 3, 0, -983025, 3, 0, -983024, 3, 0, -983023, 3, 0, -983022, 3, 0, -983021, 3, 0, -983020, 3, 0, -983019, 3, 0, -983018, 3, 0, -983017, 3, 0, -983016, 3, 0, -983015, 3, 0, -983014, 3, 0, -983013, 3, 0, -983012, 3, 0, -983011, 3, 0, -983010, 3, 0, -983009, 3, 0, -851974, 0, 0, -851970, 0, 0, -917502, 0, 0, -917498, 0, 0, -917494, 2, 0, -917492, 2, 0, -917490, 1, 0, -917488, 1, 0, -917486, 1, 0, -917484, 1, 0, -917482, 1, 0, -917480, 1, 0, -917478, 1, 0, -917476, 1, 0, -917474, 1, 0, -786422, 2, 0, -786420, 2, 0, -589830, 0, 0, -589826, 0, 0, -655358, 0, 0, -655354, 2, 0, -655352, 2, 0, -655350, 2, 0, -655348, 2, 0, -655346, 3, 0, -655345, 3, 0, -655344, 3, 0, -655343, 3, 0, -655342, 3, 0, -655341, 3, 0, -655340, 3, 0, -655339, 0, 0, -655335, 0, 0, -655331, 1, 0, -655329, 3, 0, -589810, 3, 0, -589809, 3, 0, -589808, 3, 0, -589807, 3, 0, -589806, 3, 0, -589805, 3, 0, -589804, 3, 0, -589793, 3, 0, -524282, 3, 0, -524281, 3, 0, -524280, 3, 0, -524279, 3, 0, -524278, 3, 0, -524277, 3, 0, -524276, 3, 0, -524275, 3, 0, -524274, 3, 0, -524273, 3, 0, -524272, 3, 0, -524271, 3, 0, -524270, 3, 0, -524269, 3, 0, -524268, 3, 0, -524257, 3, 0, -458746, 3, 0, -458745, 7, 0, -458743, 6, 0, -458741, 1, 0, -458739, 0, 0, -458735, 0, 0, -458721, 3, 0, -393216, 3, 0, -393215, 3, 0, -393214, 3, 0, -393213, 3, 0, -393212, 3, 0, -393211, 3, 0, -393210, 3, 0, -393195, 0, 0, -393191, 0, 0, -393187, 1, 0, -393185, 3, 0, -262145, 3, 0, -327680, 3, 0, -327679, 2, 0, -327677, 7, 0, -327675, 6, 0, -327673, 6, 0, -327671, 6, 0, -327649, 3, 0, -196610, 3, 0, -196609, 3, 0, -262144, 3, 0, -262113, 3, 0, -131077, 2, 0, -131075, 2, 0, -131073, 2, 0, -196607, 6, 0, -196605, 6, 0, -196603, 6, 0, -196601, 5, 0, -196597, 1, 0, -196595, 0, 0, -196591, 0, 0, -196577, 3, 0, -131051, 0, 0, -131047, 0, 0, -131043, 1, 0, -131041, 3, 0, -6, 2, 0, -4, 2, 0, -2, 2, 0, -65536, 3, 0, -65535, 6, 0, -65533, 6, 0, -65531, 6, 0, -65505, 3, 0, 0, 3, 0, 19, 3, 0, 31, 3, 0, 131066, 3, 0, 131067, 3, 0, 131068, 0, 0, 65536, 6, 0, 65538, 6, 0, 65540, 3, 0, 65541, 3, 0, 65542, 1, 0, 65544, 8, 0, 65545, 2, 0, 65547, 2, 0, 65549, 2, 0, 65551, 2, 0, 65553, 2, 0, 65555, 2, 0, 65567, 3, 0, 196602, 3, 0, 196603, 3, 0, 131076, 2, 0, 131080, 8, 0, 131093, 0, 0, 131097, 0, 0, 131101, 1, 0, 131103, 3, 0, 262138, 2, 0, 196608, 2, 0, 196610, 3, 0, 196611, 3, 0, 196616, 2, 0, 196618, 3, 0, 196619, 3, 0, 196620, 3, 0, 196621, 3, 0, 196622, 3, 0, 196623, 3, 0, 196624, 3, 0, 196625, 3, 0, 196626, 3, 0, 196627, 3, 0, 196628, 3, 0, 196639, 3, 0, 262146, 3, 0, 262147, 3, 0, 262148, 3, 0, 262149, 3, 0, 262154, 3, 0, 262155, 2, 0, 262157, 2, 0, 262159, 2, 0, 262161, 2, 0, 262163, 2, 0, 262175, 3, 0, 393211, 3, 0, 393212, 1, 0, 393214, 1, 0, 327680, 0, 0, 327684, 1, 0, 327686, 1, 0, 327688, 2, 0, 327690, 3, 0, 327711, 3, 0, 458747, 3, 0, 393226, 3, 0, 393227, 2, 0, 393229, 2, 0, 393231, 2, 0, 393233, 2, 0, 393235, 2, 0, 393237, 2, 0, 393239, 2, 0, 393241, 2, 0, 393243, 2, 0, 393245, 2, 0, 393247, 3, 0, 524283, 3, 0, 458760, 2, 0, 458762, 3, 0, 458783, 3, 0, 589819, 3, 0, 524298, 3, 0, 524299, 3, 0, 524300, 3, 0, 524301, 3, 0, 524302, 3, 0, 524303, 3, 0, 524304, 3, 0, 524305, 3, 0, 524306, 3, 0, 524307, 3, 0, 524308, 3, 0, 524309, 3, 0, 524310, 3, 0, 524311, 3, 0, 524312, 3, 0, 524313, 3, 0, 524314, 3, 0, 524315, 3, 0, 524316, 3, 0, 524317, 3, 0, 524318, 3, 0, 524319, 3, 0 )

[node name="TileMapForeground" type="TileMap" parent="."]
scale = Vector2( 0.5, 0.5 )
z_index = 10
tile_set = ExtResource( 3 )
cell_size = Vector2( 128, 128 )
cell_quadrant_size = 64
format = 1
tile_data = PoolIntArray( -1048584, 2, 0, -1048582, 2, 0, -1048580, 2, 0, -1048578, 2, 0, -1114112, 2, 0, -1114110, 2, 0, -1114108, 2, 0, -1114106, 2, 0, -1114104, 2, 0, -1114102, 2, 0, -1114100, 2, 0, -1114098, 2, 0, -1114096, 2, 0, -1114094, 2, 0, -1114092, 2, 0, -1114090, 2, 0, -1114088, 2, 0, -1114086, 2, 0, -1114084, 2, 0, -1114082, 6, 0, -1114080, 6, 0, -917512, 1, 0, -655368, 1, 0, -720872, 6, 0, -720870, 6, 0, -720868, 6, 0, -720866, 6, 0, -720864, 6, 0, -655338, 6, 0, -589804, 6, 0, -589800, 8, 0, -589799, 8, 0, -589798, 8, 0, -589797, 8, 0, -589796, 8, 0, -589795, 8, 0, -589794, 8, 0, -589793, 8, 0, -589792, 6, 0, -524266, 8, 0, -524265, 8, 0, -524264, 8, 0, -524263, 8, 0, -524262, 8, 0, -524261, 8, 0, -524260, 8, 0, -524259, 8, 0, -524258, 8, 0, -524257, 8, 0, -393224, 1, 0, -458720, 1, 0, -327686, 8, 0, -327685, 8, 0, -327684, 8, 0, -327683, 8, 0, -327682, 8, 0, -327681, 8, 0, -262150, 8, 0, -262149, 8, 0, -262148, 8, 0, -262147, 8, 0, -262146, 8, 0, -196614, 8, 0, -196613, 8, 0, -196612, 8, 0, -196611, 8, 0, -131080, 1, 0, -131078, 8, 0, -131077, 8, 0, -131076, 8, 0, -196576, 1, 0, -65542, 8, 0, -65541, 8, 0, -6, 8, 0, 131060, 8, 0, 131061, 8, 0, 131062, 5, 0, 131064, 1, 0, 131066, 6, 0, 65568, 1, 0, 196596, 8, 0, 196597, 8, 0, 262132, 6, 0, 393204, 8, 0, 393205, 8, 0, 393206, 6, 0, 327712, 1, 0, 458740, 8, 0, 458741, 8, 0, 524276, 5, 0, 655352, 2, 0, 655354, 2, 0, 655356, 0, 0, 589824, 2, 0, 589826, 2, 0, 589828, 3, 0, 589829, 4, 0, 589830, 3, 0, 589831, 4, 0, 589832, 3, 0, 589833, 4, 0, 589834, 2, 0, 589836, 0, 0, 589840, 0, 0, 589844, 0, 0, 589848, 2, 0, 589850, 2, 0, 589852, 2, 0, 589854, 2, 0, 589856, 2, 0, 655364, 4, 0, 655365, 3, 0, 655366, 4, 0, 655367, 3, 0, 655368, 4, 0, 655369, 3, 0, 786420, 6, 0, 786422, 8, 0, 786423, 8, 0, 786424, 0, 0, 720896, 0, 0, 720900, 0, 0, 720904, 0, 0, 851958, 8, 0, 851959, 8, 0, 917492, 8, 0, 917493, 8, 0, 917494, 6, 0, 917500, 2, 0, 917502, 2, 0, 983028, 5, 0, 983029, 5, 0, 983030, 5, 0, 983031, 5, 0, 983032, 5, 0, 983033, 5, 0, 983034, 5, 0, 917516, 8, 0, 917517, 8, 0, 917519, 5, 0, 917520, 5, 0, 917521, 8, 0, 917522, 8, 0, 917523, 8, 0, 1048571, 5, 0, 1048572, 5, 0, 1048573, 5, 0, 1048574, 5, 0, 1048575, 5, 0, 983040, 5, 0, 983041, 5, 0, 983042, 5, 0, 983043, 5, 0, 983044, 5, 0, 983045, 5, 0, 983046, 5, 0, 983047, 5, 0, 983048, 5, 0, 983049, 5, 0, 983050, 5, 0, 983051, 5, 0, 983052, 5, 0, 983053, 5, 0, 983054, 5, 0 )

[node name="Player" parent="." instance=ExtResource( 9 )]
position = Vector2( 560, 496 )

[node name="PlayerCamera" type="Camera2D" parent="Player"]
position = Vector2( -0.606995, -96 )
current = true
process_mode = 0
drag_margin_left = 0.5
drag_margin_top = 0.5
drag_margin_right = 0.5
drag_margin_bottom = 0.5
script = ExtResource( 2 )

[node name="PortalGun" parent="Player" instance=ExtResource( 7 )]
position = Vector2( 0, -80 )
scale = Vector2( 0.2, 0.2 )

[node name="WorldCollider" type="StaticBody2D" parent="."]
z_index = 11
collision_layer = 2
collision_mask = 2

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="WorldCollider"]
polygon = PoolVector2Array( -511.86, 575.825, 2047.98, 576.012, 2048.04, -448.032, 1280.03, -448.032, 1279.99, -576.018, 1407.94, -575.874, 1408.18, -640.111, 1536.03, -639.676, 1535.73, -703.32, 2175.98, -701.063, 2640.01, -196.02, 3237.29, -208.5, 3224.61, -1000.74, 2175.24, -960.579, -383.97, -960.06, -383.389, -385.043, -0.00915527, -383.005, 0.0886078, -320.498, -63.0637, -320.76, -63.0278, -258.234, -128.058, -256.293, -127.734, -193.205, -191.05, -193.534, -189.942, -131.485, -255.315, -129.269, -253.099, -67.2192, -319.58, -63.8951, -318.472, -1.84573, -381.63, -2.95377, -383.846, 315.049, -511.269, 318.373, -1202.78, 676.223, -511.078, 307.615, -511.831, -1088.87, 2174.73, -1085.63, 3540.38, -1262.1, 3686.15, 81.5398, 2570.68, 24.4985, 2177.73, -444.508, 2176.62, 707.573, -511.869, 702.477, -1114.69, 1195.59, -1598.32, 1010.84, -1565.71, 500.046, -1402.69, 548.951, -1457.03, 902.16, -1141.86, 1070.61 )

[node name="Weighted Cube" parent="." instance=ExtResource( 11 )]
position = Vector2( 73.6067, -1473.51 )
rotation = -3.14159
scale = Vector2( 1, -1 )

[node name="FloorButton" parent="." instance=ExtResource( 12 )]
position = Vector2( 1776.97, 576.898 )
rotation = -3.14159
scale = Vector2( 1, -1 )

[node name="Fizzler" parent="FloorButton" instance=ExtResource( 13 )]
position = Vector2( -353.482, -1408.14 )

[node name="CubeDropper" parent="." instance=ExtResource( 4 )]
position = Vector2( 636.583, -959.719 )
rotation = -3.14159
scale = Vector2( 1, -1 )
auto_drop = true
object = ExtResource( 11 )

[node name="PedestalButton" parent="." instance=ExtResource( 6 )]
position = Vector2( -62.0095, -383.397 )
rotation = -3.14159
scale = Vector2( 1, -1 )

[node name="WhiteLayer" type="StaticBody2D" parent="." groups=[
"white_layer",
]]
z_index = 11
collision_layer = 2
collision_mask = 2

[node name="Layer2" type="CollisionShape2D" parent="WhiteLayer"]
position = Vector2( 833.312, 608 )
shape = SubResource( 1 )

[node name="Layer1" type="CollisionShape2D" parent="WhiteLayer"]
position = Vector2( 2115.5, 59.3214 )
shape = SubResource( 2 )

[node name="Layer3" type="CollisionShape2D" parent="WhiteLayer"]
position = Vector2( -456.726, -398.913 )
shape = SubResource( 3 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="WhiteLayer"]
position = Vector2( 759.324, -1048.86 )
scale = Vector2( -1, 1 )
shape = SubResource( 4 )

[node name="TestchamberSign" parent="." instance=ExtResource( 8 )]
position = Vector2( -128, 336 )
number = 1
max_number = 100
icons_type = [ 0, 1 ]
icons_on = [ true, true ]

[node name="CanvasModulate" type="CanvasModulate" parent="."]
visible = false
color = Color( 0, 0, 0, 1 )

[node name="Lights" type="Node2D" parent="."]

[node name="Light2D" type="Light2D" parent="Lights"]
position = Vector2( -112, -1296 )
scale = Vector2( 2.0625, 2.0625 )
texture = ExtResource( 5 )
texture_scale = 5.0
energy = 1.3
mode = 2
shadow_enabled = true
shadow_gradient_length = 1.0
shadow_filter = 5
shadow_filter_smooth = 1.0
__meta__ = {
"_edit_lock_": true
}

[node name="TestDoor" parent="." instance=ExtResource( 10 )]
position = Vector2( 2000.29, -703.649 )
[connection signal="pressed" from="FloorButton" to="TestDoor" method="open"]
[connection signal="released" from="FloorButton" to="TestDoor" method="close"]
[connection signal="pressed" from="PedestalButton" to="CubeDropper" method="spawn_new"]
